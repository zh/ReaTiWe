{% extends 'sidebar.html' %}
{% block title %}User Settings{% endblock %}
{% block content %}
  {% if error %}
  <p><span class="error">{{ error|escape }}</span></span>
  {% endif %}
  <p>
  <form action="/settings" method="post" class="settings">
    <p><label for="nick">Nick:</label>
       <input id="nick" name="nick" type="text" size="30" value="{{ microUser.nick|escape }}">
    </p>
    <p><label for="jid">JID:</label>
       <input id="jid" name="jid" type="text" size="30" value="{{ microUser.jid.address|escape }}">
    </p>
    <p><input type="submit" value="Save">&nbsp;<a href="/">Cancel</a></p>
  </form>
  </p>
  <p><a href="/">&laquo; Back to the blog</a></p>
{% endblock %}

{% block bottom %}
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
  <script type="text/javascript">
  //<![CDATA[

    $(function() {
      $("input[name=nick]").select();
      $("form.settings").submit(function() {
          var required = ["nick", "jid"];
          var form = $(this).get(0);
          for (var i = 0; i < required.length; i++) {
              if (!form[required[i]].value) {
                  $(form[required[i]]).select();
                  return false;
              }
          }
          return true;
      });
    });

  //]]>
  </script>
{% endblock %}
